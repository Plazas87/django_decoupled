{% extends 'base.html' %}
{% block hero %}
{% endblock hero %}
{% block content %}
    <div class="columns is-mobile is-centered">
        <div class="column is-half">
            <h3 class="subtitle is-3">Nuevo proyecto</h3>
            <div class="box notification is-info">
                <h4 class="subtitle is-4">Introduce los datos de tu nuevo proyecto</h4>
                <article>
                    <p>Empieza dando un nombre a tu proyecto y sube un archivo con los datos de entrenamiento.</p>
                    <p>
                        Si <b>no tienes un archivo de datos</b>, puedes crear uno usando <a href="">este fichero</a> como plantilla.
                    </p>
                </article>
            </div>
            <form action="{% url 'workspaces:create' %}"
                  method="post"
                  enctype="multipart/form-data">
                {% if form.errors %}{{ form.errors }}{% endif %}
                {% csrf_token %}
                <input type="hidden" name="owner" value="{{ user.id }}">
                <div class="field">
                    <label class="label" for="name">Nombre</label>
                    <div class="control">
                        <input class="input"
                               type="text"
                               name="name"
                               placeholder="Nombre del proyecto">
                    </div>
                </div>
                <div class="field">
                    <div id="dataset_file" class="file has-name is-boxed">
                        <label class="file-label" for="dataset">
                            <input class="file-input" type="file" id="dataset" name="dataset">
                            <span class="file-cta">
                                <span class="file-icon">
                                    <i class="fas fa-upload"></i>
                                </span>
                                <span class="file-label">Carga el conjunto de datos...</span>
                            </span>
                            {% comment %} <span class="file-name">Screen Shot 2017-07-29 at 15.54.25.png</span> {% endcomment %}
                        </label>
                    </div>
                </div>
                {% comment %} <div class="field">
                <div class="control">
                    <label class="checkbox">
                        <input type="checkbox">
                        Confirmo haber leído los <a href="#">términos y condiciones</a>
                    </label>
                </div>
                </div> {% endcomment %}
                <div class="field is-grouped">
                    <div class="control">
                        <button class="button is-link" type="submit">Crear</button>
                    </div>
                    <div class="control">
                        <a class="button is-link is-light" href="{% url 'workspaces:list' %}">Cancelar</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock content %}
{% block extra_javascript %}
    <!-- Javascript to retrieve the name of the selected file. -->
    <script>
    // Select the input element using
    // document.querySelector
    var input = document.querySelector(
      "#dataset_file>.file-label>.file-input"
    );

    // Bind an listener to onChange event of the input
    input.onchange = function () {
        if(input.files.length > 0){
            var fileNameContainer =
                document.querySelector(
                  "#dataset_file>.file-label>.file-cta>.file-label"
                );
            // set the inner text of fileNameContainer
            // to the name of the file
            fileNameContainer.textContent =
              input.files[0].name;
        }
    }
    </script>
{% endblock extra_javascript %}
